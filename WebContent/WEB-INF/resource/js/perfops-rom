"use strict";!function(a){var n,t="https://devnull.perfops.net",c="https://rum-cdn.perfops.net/providers",i=3e5,p=6e4,s=3,e=-1!==function(){}.toString().indexOf("minified")?{logInfo:console.log,logError:console.error}:{logInfo:function(){},logError:function(){}},d=e.logInfo,u=e.logError,h=window.rum?window.rum.key:void 0;function l(n){return Math.max(0,Number(n.toFixed(2)))}function f(r,n){var e=1<arguments.length&&void 0!==n?n:{},t=e.cb,o=void 0===t?function(){}:t,c=e.data,i=e.method,p=void 0===i?"GET":i,s=e.timeout,d=void 0===s?3e3:s;return new a(function(n,e){var t=new XMLHttpRequest;t.onload=function(){return n(t)},t.onerror=t.ontimeout=function(){u(t),e(new Error("Status ".concat(t.status,". Response: ").concat(t.statusText)))},t.open(p,r),t.timeout=d,o(t),t.send(c)})}function g(n){p=n.interval?1e3*parseInt(n.interval):p,n.repeats&&(s="Infinite"===n.repeats?Math.pow(2,32):parseInt(n.repeats))}function r(){var e=0;setTimeout(function n(){var r={ua:navigator.userAgent,hostname:window.location.hostname,client:h},o=[];(function(){var e="perfops-rum-resources",n=JSON.parse(window.localStorage.getItem(e));return n&&n.expiry>Date.now()?(n.config&&g(n.config),a.resolve(n.data)):f(c).then(function(n){return JSON.parse(n.response)}).then(function(n){if(!n||!n.data||!n.data.length)throw new Error("Empty response.data");return window.localStorage.setItem(e,JSON.stringify({data:n.data,config:n.config,expiry:Date.now()+i})),n.config&&g(n.config),n.data}).catch(function(){return{data:[{id:17,cdnUrl:"https://edgecast-cdn.perfops.io/500b-bench.jpg",p:1},{id:36,cdnUrl:"https://perfops-cc.cdn-tech.io/500b-cc-bench.jpg",p:0},{id:22,cdnUrl:"https://09d3da8545e855ce.cdn.gocache.net/500b-bench.jpg",p:0},{id:15,cdnUrl:"https://cdnperf-rum.cdnetworks.net/500b-bench.jpg",p:1},{id:14,cdnUrl:"https://perfops.r.worldssl.net/500b-bench.jpg",p:1},{id:30,cdnUrl:"https://perfops.doracdn.com/500b-db-bench.jpg",p:1},{id:7,cdnUrl:"https://google-cdn.perfops.io/500b-google-bench.jpg",p:1},{id:8,cdnUrl:"https://perfops.gcdn.co/500b-bench.jpg",p:1},{id:35,cdnUrl:"https://cdn81795137.blazingcdn.net/500b-blz-bench.jpg",p:1},{id:2,cdnUrl:"https://ovh-cdn.perfops.io/500b-bench.jpg",p:1},{id:9,cdnUrl:"https://1933886249.rsc.cdn77.org/500b-bench.jpg",p:1},{id:3,cdnUrl:"https://perfops.perfstack.cf-china.info/500b-bench.jpg",p:1},{id:13,cdnUrl:"https://m9d7v5r2.map2.ssl.hwcdn.net/500b-bench.jpg",p:1},{id:38,cdnUrl:"https://perf.psychz.net/500b-bench.jpg",p:0},{id:1,cdnUrl:"https://kgmni17536myjst.belugacdn.link/500b-bench.jpg",p:1},{id:4,cdnUrl:"https://fastly.jsdelivr.net/gh/ProspectOne/js-test@1.1/500b-bench.jpg",p:1},{id:39,cdnUrl:"https://cdnperf-rum.cdnetworks.net/500b-bench.jpg",p:0},{id:11,cdnUrl:"https://perfops.b-cdn.net/500b-bench.jpg",p:1},{id:5,cdnUrl:"https://d2axgrpnciinw7.cloudfront.net/500b-bench.jpg",p:1},{id:18,cdnUrl:"https://azure-perfops.azureedge.net/500b-bench.jpg",p:1},{id:20,cdnUrl:"https://cdnperf.cachefly.net/500b-bench.jpg",p:1},{id:6,cdnUrl:"https://perfops-ade2.kxcdn.com/500b-bench.jpg",p:1},{id:24,cdnUrl:"https://img-cdnperf.mncdn.com/500b-bench.jpg",p:0},{id:12,cdnUrl:"https://cdn.jsdelivr.net/gh/jimaek/js-test@1.1/500b-bench.jpg",p:1},{id:10,cdnUrl:"https://akamai-perfops2.azureedge.net/500b-bench.jpg",p:1}],config:{repeats:"30",interval:"10"}}})})().then(function(n){var t;return function(n,r){return n.reduce(function(n,t){return n.then(function(e){return r(t).then(function(n){return e.push(n),e})})},a.resolve([]))}((t=n,Array.from(Array(Math.ceil(t.length/2)),function(n,e){return t.slice(2*e,2*e+2)})),function(n){var e=0,t=0;return performance.clearResourceTimings(),a.all(n.map(function(n){return function(i){var p="".concat(i.cdnUrl,"?t=").concat(Date.now()),s=new URL(p).hostname;return f(p).then(function(n){var e=performance.getEntriesByName(p)[0],t={id:i.id,domain:s},r=l(e.domainLookupEnd-e.domainLookupStart),o=l(e.connectEnd-e.connectStart),c=0<o?l(e.connectEnd-e.secureConnectionStart):0;return 200<=n.status&&n.status<300&&(t=Object.assign({},t,{up:1,time:Number((e.responseEnd-e.requestStart).toFixed(2)),dnsLookupTime:r,tcpTime:o,sslTime:c,headers:n.getAllResponseHeaders()})),300<=n.status&&n.status<=500&&(t=Object.assign({},t,{up:0,dnsLookupTime:r,tcpTime:o,sslTime:c,headers:n.getAllResponseHeaders()})),t}).catch(function(){return{id:i.id,domain:s,up:0}})}(n).then(function(n){if(n.up?2e3<n.time&&e++:t++,!(1<t||n.up&&(n.time<3||3e3<n.time)))return 2<=o.push(n)?(t=0,e<2?(e=0,m(r,o.splice(0,o.length))):(e=0,o.splice(0,o.length))):void 0})}))})}).then(d,u).then(function(){e+=1,m(r,o.splice(0,o.length)),e<s&&setTimeout(n,p)})},3e3)}function m(n,e){return f("".concat(t,"/rum/v1"),{data:JSON.stringify({metadata:n,data:e}),method:"POST"}).catch(u)}n=function(){var n=["bot","headless","google","baidu","bing","msn","duckduckbot","teoma","slurp","yandex","phantomjs","pingdom","ahrefsbot"].join("|");if(new RegExp(n,"i").test(window.navigator.userAgent))console.warn("PerfOps RUM not launching due to suspicious userAgent:",window.navigator.userAgent);else if(void 0!==window.performance){if(performance.onresourcetimingbufferfull=function(){d("clear performance resource buffer"),performance.clearResourceTimings()},"function"==typeof a)return r();!function(n,e){var t=document.createElement("script"),r=!1;t.onreadystatechange=t.onload=function(){r||e(),r=!0},t.setAttribute("src",n),document.body.appendChild(t)}("https://cdn.jsdelivr.net/npm/es6-promise@4.2.4/dist/es6-promise.min.js",function(){a=window.ES6Promise,r()})}},"complete"===document.readyState?n():window.addEventListener("load",n)}(window.Promise);